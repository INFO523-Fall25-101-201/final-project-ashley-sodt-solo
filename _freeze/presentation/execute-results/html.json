{
  "hash": "5d35eeed938b36fa3ffb4ca6a5440d75",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Clustering Movement Patterns in Equine Exercise Sessions\"\nsubtitle: \"INFO 523 - Fall 2025 - Final Project\"\nauthor: \"Ashley Sodt\"\ntitle-slide-attributes:\n  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg\n  data-background-size: stretch\n  data-background-opacity: \"0.7\"\n  data-slide-number: none\nformat:\n  revealjs:\n    theme:  ['data/customtheming.scss']\n  \neditor: visual\njupyter: python3\nexecute:\n  echo: false\n---\n\n\n\n\n## Introduction\n\n-   Al-Marah Equine Center // Laura Miller\n\n* EquiPro intertial measurement units collect accelerometer data\n  + Outputs stride-level biomechanical metrics\n  + Early detection of subtle gait abnormalities\n\n**Goal**: Use unsupervised learning techniques to model each horse's typical movement and automatically flag exercise sessions that deviate from this baseline. Such anomalies may reflect behavioral irregularities, equipment\nmalfunction, pain, or potential reinjury.\n\n## Dataset\n\n* Each session exported as CSV containing stride-level movemement variables.\n  + Duque (14 sessions)\n  + Jackson (6 sessions)\n  + Perseo (5 sessions)\n\n## Dataset {.smaller}\nSample of Equipro CSV output with stride-level biomechanical metrics from one exercise session.\n\n::: {#cell-duque-head .cell execution_count=4}\n\n::: {#duque-head .cell-output .cell-output-display execution_count=14}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>segment</th>\n      <th>gait</th>\n      <th>direction</th>\n      <th>surface</th>\n      <th>stride_dur</th>\n      <th>duty_factor</th>\n      <th>stance_dur_LF</th>\n      <th>stance_dur_RF</th>\n      <th>stance_dur_LH</th>\n      <th>stance_dur_RH</th>\n      <th>...</th>\n      <th>si_up_sac</th>\n      <th>hiphike_swing</th>\n      <th>hiphike_stance</th>\n      <th>horse_name</th>\n      <th>measurement</th>\n      <th>exam_type</th>\n      <th>exam_purpose</th>\n      <th>flexion_test</th>\n      <th>diagnostic_analgesia</th>\n      <th>inconclusive</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>walk</td>\n      <td>left</td>\n      <td>soft</td>\n      <td>1.3444</td>\n      <td>64.4371</td>\n      <td>0.890</td>\n      <td>0.870</td>\n      <td>0.865</td>\n      <td>0.840</td>\n      <td>...</td>\n      <td>0.3658</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Duque</td>\n      <td>20240626T082743_logfile.itlog</td>\n      <td>In hand</td>\n      <td>Research</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1</td>\n      <td>walk</td>\n      <td>left</td>\n      <td>soft</td>\n      <td>1.3631</td>\n      <td>63.8211</td>\n      <td>0.865</td>\n      <td>0.900</td>\n      <td>0.855</td>\n      <td>0.860</td>\n      <td>...</td>\n      <td>0.3110</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Duque</td>\n      <td>20240626T082743_logfile.itlog</td>\n      <td>In hand</td>\n      <td>Research</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1</td>\n      <td>walk</td>\n      <td>left</td>\n      <td>soft</td>\n      <td>1.4238</td>\n      <td>65.0491</td>\n      <td>0.950</td>\n      <td>0.960</td>\n      <td>0.910</td>\n      <td>0.885</td>\n      <td>...</td>\n      <td>0.3212</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Duque</td>\n      <td>20240626T082743_logfile.itlog</td>\n      <td>In hand</td>\n      <td>Research</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1</td>\n      <td>walk</td>\n      <td>left</td>\n      <td>soft</td>\n      <td>1.3925</td>\n      <td>64.5510</td>\n      <td>0.905</td>\n      <td>0.930</td>\n      <td>0.855</td>\n      <td>0.905</td>\n      <td>...</td>\n      <td>0.1506</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Duque</td>\n      <td>20240626T082743_logfile.itlog</td>\n      <td>In hand</td>\n      <td>Research</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1</td>\n      <td>walk</td>\n      <td>left</td>\n      <td>soft</td>\n      <td>1.4337</td>\n      <td>65.2012</td>\n      <td>0.955</td>\n      <td>0.955</td>\n      <td>0.880</td>\n      <td>0.950</td>\n      <td>...</td>\n      <td>-0.0292</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Duque</td>\n      <td>20240626T082743_logfile.itlog</td>\n      <td>In hand</td>\n      <td>Research</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 80 columns</p>\n</div>\n```\n:::\n:::\n\n\n# Methods\n\n## Session-Level Features {.smaller}\n\nWe summarize 25 stride-level variables into session-level features.\n\n| Group                     | Biomechanical Variables                                    | Count |\n|-------------------------:|:------------------------------------------------------|------:|\n| **Stride Metrics**        | stride duration, speed, length                        | 3     |\n| **Limb Loading / Timing** | duty factor (LF/RF/LH/RH), stance durations           | 12    |\n| **Coordination**    | diagonal advanced placement (left / right)            | 4     |\n| **Trunk Symmetry**        | head / withers / sacrum asymmetry + symmetry indices  | 6     |\n| **Total**                 | —                                                     | **25** |\n\n→ Each variable is summarized per session using: mean, std, IQR, min, max \n\n→ Producing 125 engineered features per session\n\n\n## Session-Level Feature Matrix {.smaller}\n\nFeature matrix containing 24 exercise sessions and 125 engineered biomechanical movement features per session.\n\n::: {#0a2fcb9e .cell execution_count=5}\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<style type=\"text/css\">\n</style>\n<table id=\"T_00259\">\n  <thead>\n    <tr>\n      <th id=\"T_00259_level0_col0\" class=\"col_heading level0 col0\" >horse</th>\n      <th id=\"T_00259_level0_col1\" class=\"col_heading level0 col1\" >session_id</th>\n      <th id=\"T_00259_level0_col2\" class=\"col_heading level0 col2\" >n_rows</th>\n      <th id=\"T_00259_level0_col3\" class=\"col_heading level0 col3\" >stride_dur_mean</th>\n      <th id=\"T_00259_level0_col4\" class=\"col_heading level0 col4\" >stride_dur_std</th>\n      <th id=\"T_00259_level0_col5\" class=\"col_heading level0 col5\" >stride_dur_iqr</th>\n      <th id=\"T_00259_level0_col6\" class=\"col_heading level0 col6\" >stride_dur_min</th>\n      <th id=\"T_00259_level0_col7\" class=\"col_heading level0 col7\" >stride_dur_max</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td id=\"T_00259_row0_col0\" class=\"data row0 col0\" >Duque</td>\n      <td id=\"T_00259_row0_col1\" class=\"data row0 col1\" >20240627T095239</td>\n      <td id=\"T_00259_row0_col2\" class=\"data row0 col2\" >88</td>\n      <td id=\"T_00259_row0_col3\" class=\"data row0 col3\" >0.791573</td>\n      <td id=\"T_00259_row0_col4\" class=\"data row0 col4\" >0.028649</td>\n      <td id=\"T_00259_row0_col5\" class=\"data row0 col5\" >0.040925</td>\n      <td id=\"T_00259_row0_col6\" class=\"data row0 col6\" >0.722500</td>\n      <td id=\"T_00259_row0_col7\" class=\"data row0 col7\" >0.843700</td>\n    </tr>\n    <tr>\n      <td id=\"T_00259_row1_col0\" class=\"data row1 col0\" >Duque</td>\n      <td id=\"T_00259_row1_col1\" class=\"data row1 col1\" >20241122T111237</td>\n      <td id=\"T_00259_row1_col2\" class=\"data row1 col2\" >368</td>\n      <td id=\"T_00259_row1_col3\" class=\"data row1 col3\" >0.747877</td>\n      <td id=\"T_00259_row1_col4\" class=\"data row1 col4\" >0.042264</td>\n      <td id=\"T_00259_row1_col5\" class=\"data row1 col5\" >0.058700</td>\n      <td id=\"T_00259_row1_col6\" class=\"data row1 col6\" >0.592500</td>\n      <td id=\"T_00259_row1_col7\" class=\"data row1 col7\" >0.823100</td>\n    </tr>\n    <tr>\n      <td id=\"T_00259_row2_col0\" class=\"data row2 col0\" >Jackson</td>\n      <td id=\"T_00259_row2_col1\" class=\"data row2 col1\" >20250128T130146</td>\n      <td id=\"T_00259_row2_col2\" class=\"data row2 col2\" >136</td>\n      <td id=\"T_00259_row2_col3\" class=\"data row2 col3\" >0.733101</td>\n      <td id=\"T_00259_row2_col4\" class=\"data row2 col4\" >0.043684</td>\n      <td id=\"T_00259_row2_col5\" class=\"data row2 col5\" >0.069325</td>\n      <td id=\"T_00259_row2_col6\" class=\"data row2 col6\" >0.636900</td>\n      <td id=\"T_00259_row2_col7\" class=\"data row2 col7\" >0.845000</td>\n    </tr>\n    <tr>\n      <td id=\"T_00259_row3_col0\" class=\"data row3 col0\" >Jackson</td>\n      <td id=\"T_00259_row3_col1\" class=\"data row3 col1\" >20250413T144809</td>\n      <td id=\"T_00259_row3_col2\" class=\"data row3 col2\" >143</td>\n      <td id=\"T_00259_row3_col3\" class=\"data row3 col3\" >0.738984</td>\n      <td id=\"T_00259_row3_col4\" class=\"data row3 col4\" >0.047872</td>\n      <td id=\"T_00259_row3_col5\" class=\"data row3 col5\" >0.066900</td>\n      <td id=\"T_00259_row3_col6\" class=\"data row3 col6\" >0.650000</td>\n      <td id=\"T_00259_row3_col7\" class=\"data row3 col7\" >0.898100</td>\n    </tr>\n    <tr>\n      <td id=\"T_00259_row4_col0\" class=\"data row4 col0\" >Perseo</td>\n      <td id=\"T_00259_row4_col1\" class=\"data row4 col1\" >20250505T123314</td>\n      <td id=\"T_00259_row4_col2\" class=\"data row4 col2\" >268</td>\n      <td id=\"T_00259_row4_col3\" class=\"data row4 col3\" >0.724856</td>\n      <td id=\"T_00259_row4_col4\" class=\"data row4 col4\" >0.019112</td>\n      <td id=\"T_00259_row4_col5\" class=\"data row4 col5\" >0.021350</td>\n      <td id=\"T_00259_row4_col6\" class=\"data row4 col6\" >0.667500</td>\n      <td id=\"T_00259_row4_col7\" class=\"data row4 col7\" >0.803700</td>\n    </tr>\n    <tr>\n      <td id=\"T_00259_row5_col0\" class=\"data row5 col0\" >Perseo</td>\n      <td id=\"T_00259_row5_col1\" class=\"data row5 col1\" >20250508T130406</td>\n      <td id=\"T_00259_row5_col2\" class=\"data row5 col2\" >676</td>\n      <td id=\"T_00259_row5_col3\" class=\"data row5 col3\" >0.746507</td>\n      <td id=\"T_00259_row5_col4\" class=\"data row5 col4\" >0.016887</td>\n      <td id=\"T_00259_row5_col5\" class=\"data row5 col5\" >0.021300</td>\n      <td id=\"T_00259_row5_col6\" class=\"data row5 col6\" >0.696200</td>\n      <td id=\"T_00259_row5_col7\" class=\"data row5 col7\" >0.798800</td>\n    </tr>\n  </tbody>\n</table>\n```\n:::\n:::\n\n\n## Anomaly Detection Framework\n\n- Convert every feature to a z-score.\n\n- **Z-score Thresholding**: Flags sessions where any feature deviates strongly from the horse’s baseline.\n\n- **K-means Cluster Distance**: Groups similar sessions and marks those far from their cluster center as outliers.\n\n- **Isolation Forest**: Identifies sessions that are difficult to group with others (unusual combinations of features).\n\nSessions flagged by multiple methods are more likely to reflect real gait irregularities.\n\n# Results\n\n## Anomalies Flagged by Individual Methods\n\n| Method               | Duque | Jackson | Perseo |\n|---------------------|:-----:|:-------:|:------:|\n| Z-score threshold   | **7** | 0 | 0 |\n| K-means distance    | **3** | **2** | **2** |\n| Isolation Forest    | **4** | **2** | 0 |\n\n\n\n\n## High-Confidence Anomalies {.smaller}\n\nSessions flagged by ≥2 methods (strongest evidence of abnormal movement):\n\n| Horse   | Session ID       |  Methods Flagged |\n|--------|-------------------|:----------------:|\n| Duque   | 20250804T082647  | **3** |\n| Duque   | 20250309T134916  | **3** |\n| Duque   | 20250308T111144  | **3** |\n| Duque   | 20240627T095239  | **2** |\n| Jackson | 20241215T152135  | **2** |\n\nThese sessions consistently deviate from each horse’s typical movement pattern.\n\n\n\n## Method Agreement Heatmap\n\n<div align=\"center\">\n![Which methods agree when flagging anomalies?](analysis/data/fig_method_heatmap.png){width=\"50%\"}\n</div>\n\n## Max Deviation from Baseline {.smaller}\n\n<div align=\"center\">\n\n![Which sessions show the largest single-feature deviation?](analysis/data/fig_max_zscore.png){width=\"80%\"}\n\n</div>\n\n<div align=\"center\">\n![Which methods agree when flagging anomalies?](analysis/data/fig_method_heatmap.png){width=\"50%\"}\n</div>\n\n## Feature Drivers of High-Confidence Anomalies {.smaller}\n\n<div align=\"center\">\n\n![](analysis/data/fig_top_feature_heatmap.png){width=\"100%\"}\n\n</div>\n\n\n## Interpreting Anomaly Drivers — Example: Duque 08/04/25 {.smaller}\n\n**Top contributing features**\n\n- ↑ Right Hind stance duration (stance_dur_RH_max)\n\n- ↑ Diagonal timing variability (DAP metrics: dap_L_perc_iqr, dap_R_sec_max)\n\n**What this suggests**\n\n- Right hind is staying on the ground longer → compensation\n\n- Increased timing variability → reduced trot symmetry & coordination\n\n**Likely interpretation**\n\nRight hind is supporting more load, causing instability in diagonal pairing.  \nThis may indicate early hind-limb discomfort or fatigue.\n\n\n## Conclusions {.smaller}\n\n- Computed session-level biomechanics for each horse → established individualized baseline movement patterns\n- Multiple anomaly detection methods (Z-score, K-means, Isolation Forest) flagged sessions showing deviations from baseline\n- Only a small subset of sessions showed strong evidence of abnormality  \n  - High-confidence anomalies = flagged by ≥ 2 methods\n\n- Deviations were driven primarily by:\n  - Diagonal advanced placement, duty factor, and head motion symmetry\n  - Features tied to stride timing and weight distribution\n\n<div style=\"margin-top:10px; font-size:0.9em;\">\n**Interpretation:**  \nAutomated anomaly detection reveals subtle, horse-specific gait changes that may signal behavioral irregularities, equipment issues, \npain responses, or early reinjury risk. This can enable earlier detection and proactive intervention.\n</div>\n\n",
    "supporting": [
      "presentation_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}