---
title: "Clustering Movement Patterns in Equine Exercise Sessions Using Anomaly Detection"
subtitle: "Proposal"
author: 
  - name: Ashley Sodt
    affiliations:
      - name: "Applied Math PhD Student, University of Arizona"
One sentence description: 
"My goal is to use unsupervised learning techniques to cluster EquiPro sessions and detect anomalies 
that may reflect behavioral irregularities, equipment issues, or potential reinjury."

Paragraph description: |
  In this project, I aim to detect abnormal equine exercise sessions by clustering movement-based
  features derived from processed EquiPro accelerometer data. Horses at the Al-Marah Equine Center are
  equipped with 7 accelerometers during exercise sessions on a lunge line at
  walk, trot, and canter. The EquiPro system outputs calculated biomechanical metrics such as
  diagonal advanced placement, stride duration, and footfall duration. By modeling typical
  movement patterns for each horse, I plan to identify exercise sessions that deviate significantly
  from a horse’s baseline. Such anomalies may reflect behavioral irregularities, equipment
  malfunction, pain, or potential reinjury. This is important in equine rehabilitation, where
  subtle changes in loading or symmetry can precede clinical signs of injury.

  The dataset for this project consists of multiple sessions for three horses: Duque (14 sessions),
  Jackson (6 sessions), and Perseo (5 sessions). Each session is stored as a the processed results Equipro 
  CSV file containing time-sampled biomechanical variables. These files will be summarized one file with
  session-level features for analysis. I chose this dataset because it is directly 
  relevant to my graduate research and because it is well suited for unsupervised analysis.
  Session-level features will allow me to establish per-horse baseline distributions and apply
  methods such as z-score analysis, k-means clustering, and Isolation Forest to quantify deviations.
  By identifying and visualizing sessions with anomalies over time, this project will explore whether
  data-driven monitoring can help track rehabilitation progress and highlight sessions that warrant
  further investigation.


format:
  html:
    code-tools: true
    code-overflow: wrap
    code-line-numbers: true
    embed-resources: true
editor: visual
code-annotations: hover
execute:
  warning: false
jupyter: python3
---

```{python}
#| label: load-pkgs
#| message: false
import numpy as np
```

## Dataset

```{python}
#| label: load-dataset
#| message: false
```
import pandas as pd

df_duque = pd.read_csv("data/Horses/Duque/20240626T082743-Duque-results.csv")
df_duque.shape


description: |
The primary dataset consists of EquiPro csv result files collected from horses exercised at 
the Al-Marah Equine Center. The EquiPro system outputs a CSV file for each session containing 
biomechanical variables like diagonal advanced placement and duration of footfalls. 
The file loaded above for Duque contains {{ df_duque.shape[0] }} rows and {{ df_duque.shape[1] }} columns.

For this project, I am using three horses with multiple sessions: 
Duque (14 sessions), Jackson (6 sessions), and Perseo (5 sessions). These sessions allow 
analysis within each horse over time. I chose this dataset because (1) it is directly 
relevant to my research group’s goal of developing tools for equine rehabilitation 
monitoring, and (2) the repeated-session structure makes it well suited for unsupervised 
learning approaches such as clustering and anomaly detection.

## Questions

How can we model a baseline of normal movement patterns for each horse across exercise sessions?
Which sessions deviate from this baseline, and what characteristics make anomalies occur?

## Analysis plan

To answer the above questions, I will load all EquiPro session files and extract key biomechanical 
variables such as symmetry indices, impulse, stance duration, and power. I will then engineer 
session-level features by summarizing each variable (for example mean, standard deviation, 
left–right ratios, and gait-phase proportions). These features will be used to establish a 
baseline of normal movement for each horse.

To identify abnormal sessions, I will standardize variables and apply unsupervised methods such 
as z-score thresholding, k-means clustering, and Isolation Forest. Sessions that are far from 
the baseline distribution will be labeled as anomalous. No external datasets will be merged.
